# Week06 Assignment

> 姓名：胡峻诚
>
> 学号：19241027

*阅读教材第四章并查阅网络资料，回答以下问题。*

## 1. 目录

文件和目录的作用有什么不同？

> LINUX 有四种基本文件系统类型：普通文件、目录文件、连接文件和特殊文件，可用 file 命令来识别。
>
> - 普通文件
>   - 如文本文件、C 语言元代码、SHELL 脚本、二进制的可执行文件等，可用 cat、less、more、vi、emacs 来察看内容，用 mv 来改名。
>   - LINUX 的一些设备如磁盘、终端、打印机等都在文件系统中表示出来，则一类文件就是特殊文件，常放在/dev 目录内。例如，软驱 A 称为/dev/fd0。LINUX 无 C:// 的概念，而是用/dev/had 来自第一硬盘。
> - 目录文件
>   - 包括文件名、子目录名及其指针。它是 LINUX 储存文件名的唯一地方，可用 ls 列出目录文件。

## 2.  标准文件 I/O

简述标准文件 I/O 和系统调用 I/O 的各自优缺点是什么？

> - 系统调用 I/O 读写文件时，每次操作都会执行相关系统调用，这样处理的好处是直接读写实际文件，坏处是频繁地系统调用会增加系统开销。
> - 标准文件 I/O 可以看成是在文件 I/O 的基础上封装了缓冲机制，先读写缓冲区，必要时再访问实际文件出，从而减少系统调用的次数，坏处是多了内存的拷贝。

## 3.  硬链接与软链接

符号链接和硬链接的异同点是什么？

> - 相同点
>   - 都建立了对同一个文件的链接
>   - 删除链接对源文件均无影响
> - 不同点
>
>   - 含义不同：符号链接是一类特殊的文件，其包含有一条以绝对路径或相对路径的形式指向其它文件或者目录的引用；硬链接是一个文件的一个或多个文件名
>   - 删除文件性质不同：
>     - 在对符号链接进行读写时，系统会自动把该操作转换为对源文件的操作，但删除链接文件时，系统仅仅删除链接文件，而不删除源文件本身；如果目标文件被移动、重命名或删除，任何指向它的符号链接仍然存在，但会指向一个不复存在的文件
>     - 而移动或删除原始文件时，硬链接不会被破坏，因为它所引用的是文件的物理数据
>   - 硬链接的文件不需要用户有访问原始文件的权限，也不会显示原始文件的位置

## 4. 权限

有一个目录，它的许可权限为rwxr--r--，请写出与其对应的二进制st_mode形式。

> 0100 000 111100100

目录文件的x权限代表什么？当用户不具有该权限时，会发生什么情况？

> 表示能否打开该目录，类似于能够使用`cd`命令进入。
>
> 用户不具有该权限时，这个目录无法进入，里面的内容就都不可见。

假设目前系统的 umask 为 0022，执行`creat("a.txt", 765)`代码后，请写出文件`a.txt`所有者、组用户及其他用户对该文件的权限。

> 0022 转换为对应的二进制为 000010010，对应的权限位为 ----w--w-，表示将同组用户及其他用户的写权限屏蔽掉，其反码为 111101101，将 creat 函数中的 765 转换为的二进制与反码做按位与操作得到 111100101，得到创建的文件的实际的权限应该为 -rwxr--r-x，也就是说权限分别为：
>
> 所有者：不能读、能写、能执行。
>
> 组用户：能读、不能写、不能执行。
>
> 其他用户：能读、不能写、能执行。
